wait(5)
-- Get the Closest Part
local player = game:GetService("Players").LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoidRootPart = character:WaitForChild("HumanoidRootPart")
    
local closestPart = nil
local closestDistance = math.huge
    
for _, part in ipairs(workspace:GetDescendants()) do
    if part:IsA("BasePart") and part.CanCollide then
        local distance = (part.Position - humanoidRootPart.Position).Magnitude
        if distance < closestDistance then
            closestDistance = distance
        closestPart = part
        end
    end
end

 -- Spam Attacks
-- define the first loop
local function loop1()
    -- Spam "E" Attack of Gun
   while true do
       local args = {
            [1] = "Gun Style",
            [2] = "E",
            [3] = CFrame.new(player.Character.HumanoidRootPart.Position + Vector3.new(0, -10, 0)),
            [4] = closestPart,
            [5] = 5
        }

        game:GetService("ReplicatedStorage").Remotes.requestAbility:FireServer(unpack(args))
        wait() -- wait 1 second before firing the next ability
   end
end

-- define the first loop
local function loop2()
    -- Spam "R" Attack of Gun
   while true do
       local args = {
            [1] = "Gun Style",
            [2] = "R",
            [3] = CFrame.new(player.Character.HumanoidRootPart.Position + Vector3.new(0, -10, 0)),
            [4] = closestPart,
            [5] = 5
        }

        game:GetService("ReplicatedStorage").Remotes.requestAbility:FireServer(unpack(args))
        wait() -- wait 1 second before firing the next ability
   end
end

-- define the first loop
local function loop3()
    -- Spam "A" Attack of Gun
   while true do
       local args = {
            [1] = "Gun Style",
            [2] = "A",
            [3] = CFrame.new(player.Character.HumanoidRootPart.Position + Vector3.new(0, -10, 0)),
            [4] = closestPart,
            [5] = 5
        }

        game:GetService("ReplicatedStorage").Remotes.requestAbility:FireServer(unpack(args))
        wait() -- wait 1 second before firing the next ability
   end
end

if closestPart then
    coroutine.wrap(loop1)()
    coroutine.wrap(loop2)()
    coroutine.wrap(loop3)()
end
